@using System.Text.Json;
@model ShoppingCartListModel
@{
    ViewData["Title"] = "Igors Home Page";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/js/ShoppingCartIndex.js"></script>

@* @section Scripts {
    <script>
        $(document).ready(function () {
            $("#jsbuy2").on("click", function () {
                alert("Handler for `click` called.");
            });
        });

        $.ajax({
            url: '/ShoppingCartController/BuyAllItemsInShoppingCart',
            type: 'POST',
            data: { jsonData: '@(serializedList)' },
            success: function (result) {
            }
        });
    </script>
} *@

<div class="text-center">
    <h1 class="display-4">Welcome</h1>

    <br />

    Your Products!

    <br />
    <br />
    <br />

    <table>
        <tr>
            <th>Product Id</th>
            <th>Product Name</th>
            <th>How many you buy</th>
            <th></th>
        </tr>

        @{
            foreach (var element in Model.ShoppingCartModelList)
            {
                <tr>
                    @{
                        <td> @(element.ProductModelInCart.ProductId)</td>
                        <td> @(element.ProductModelInCart.Name)</td>
                        <td> @(element.count)</td>
                        <td> @(Html.ActionLink("Delete", "DeleteFromShoppingCart", "ShoppingCart", new { productId = element.ProductModelInCart.ProductId }, new { @class = "btn btn-secondary" }))</td>
                    }

                </tr>
            }
        }

    </table>

    <br />
    <br />

    </div>


<div id="couponTable" class="text-center">

    <table>
        <tr>
            <th>Coupon Code</th>
            <th>Amount of Discount</th>
            <th>Type of Discount</th>
            <th></th>
        </tr>

        @{
            foreach (var element in Model.CouponModelList)
            {
                <tr>
                    @{
                        <td> @(element.Code)</td>
                        <td> @(element.AmountOfDiscount)</td>
                        <td> @(element.TypeOfDiscount)</td>
                        <td> @(Html.ActionLink("Delete", "DeleteCoupon", "ShoppingCart", new { CouponId = element.CouponId }, new { @class = "btn btn-secondary" }))</td>
                    }

                </tr>
            }
        }

    </table>

    </div>
    <br />
    <br />
    <br />

    @Html.ValidationSummary("", new { @class = "text-danger" })



<input id="couponCode" enctype='application/json' type="text" />
<br />
<button onclick="getCouponCode()">JS Add Coupon!</button>
   
<br />
<br />
<br />

<form  asp-action="AddCoupon" asp-controller="ShoppingCart" method="post">
        <input type="text" name="couponCode"/>
        <span asp-route-couponCode="couponCode" class="text"> Add Coupon Code</span>
        <br />
    <input id="couponButton23" type="submit" value="Add Coupon" />
    </form>

    <br />
    @(Html.ActionLink("Buy everything", "BuyAllItemsInShoppingCart", "ShoppingCart", new { }, new { @class = "btn btn-secondary" }))


    

